<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Crypto Position Sizer Pro</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        * { box-sizing: border-box; margin: 0; padding: 0; -webkit-tap-highlight-color: transparent; }
        body { font-family: -apple-system, sans-serif; background-color: #f5f6f8; display: flex; justify-content: center; padding: 20px; }
        .card { width: 100%; max-width: 380px; background: white; padding: 20px; border-radius: 25px; box-shadow: 0 10px 30px rgba(0,0,0,0.06); }
        .logo-area { text-align: center; margin-bottom: 5px; }
        .logo-box { width: 75px; height: 75px; background: #1e293b; border-radius: 20px; display: inline-flex; align-items: center; justify-content: center; margin-bottom: 10px; }
        .logo-box i { font-size: 45px; color: #ff9800; }
        .app-title { color: #2e7d32; text-align: center; font-size: 0.9rem; font-weight: 600; margin-bottom: 25px; }
        .grid { display: grid; grid-template-columns: 1fr 1fr; gap: 15px; margin-bottom: 15px; }
        .group { display: flex; flex-direction: column; position: relative; }
        label { font-size: 0.85rem; color: #666; margin-bottom: 8px; font-weight: 500; }
        input { border: 1.5px solid #ff9800; border-radius: 12px; padding: 12px; font-size: 1.1rem; width: 100%; outline: none; background: #fff; color: #333; }
        .risk-top-label { position: absolute; right: 0; top: 0; font-size: 0.8rem; color: #888; }
        .res-section { text-align: center; margin: 20px 0; position: relative; }
        .res-val { font-size: 3.5rem; font-weight: 800; color: #333; line-height: 1; }
        .res-label { color: #2e7d32; font-size: 0.9rem; font-weight: 600; margin-top: 5px; }
        .action-btns { display: flex; justify-content: center; gap: 20px; margin-top: 15px; position: absolute; right: 0; top: 0; }
        .icon-btn { width: 40px; height: 40px; background: #f0fdf4; border: 1px solid #dcfce7; border-radius: 10px; display: flex; align-items: center; justify-content: center; color: #2e7d32; font-size: 1.2rem; cursor: pointer; }
        .swap-row { display: flex; align-items: flex-end; gap: 10px; margin-bottom: 15px; }
        .swap-char { color: #2e7d32; font-size: 1.3rem; padding-bottom: 12px; cursor: pointer; }
        .stats-box { background: #5a5f73; border-radius: 15px; margin-top: 25px; display: grid; grid-template-columns: 1fr 1.2fr; overflow: hidden; color: white; }
        .tgt-part { padding: 15px; border-right: 1px solid rgba(255,255,255,0.2); display: flex; align-items: center; }
        .tgt-input { background: #6b7280; border: 1px solid rgba(255,255,255,0.3); border-radius: 10px; color: white; width: 100%; padding: 10px; text-align: center; font-size: 1rem; outline: none; }
        .det-part { padding: 12px; font-size: 0.95rem; }
        .det-row { display: flex; justify-content: space-between; margin-bottom: 8px; }
        .val-green { color: #4ade80; font-weight: bold; }
        .val-red { color: #f87171; font-weight: bold; }
        .val-orange { color: #fbbf24; font-weight: bold; }
        .nav { background: #ff6d00; border-radius: 50px; margin-top: 25px; display: flex; justify-content: space-around; padding: 12px; align-items: center; }
        .nav-item { color: white; font-weight: bold; font-size: 0.9rem; }
        .nav-active { background: #064e3b; padding: 8px 18px; border-radius: 20px; }
    </style>
</head>
<body>

<div class="card">
    <div class="logo-area"><div class="logo-box"><i class="fa-solid fa-calculator-combined"></i></div></div>
    <p class="app-title">Crypto Position Size Calculator</p>

    <div class="grid">
        <div class="group"><label>Capital</label><input type="number" id="v_cap" value="130" oninput="calculate()"></div>
        <div class="group">
            <label>Risk %</label><span class="risk-top-label" id="v_risk_top">$130</span>
            <input type="number" id="v_riskP" value="100" oninput="calculate()">
        </div>
        <div class="group"><label>Entry Price</label><input type="number" id="v_entry" value="95283" oninput="calculate()"></div>
        <div class="group"><label>Stop Loss</label><input type="number" id="v_sl" value="94400" oninput="calculate()"></div>
    </div>

    <div class="res-section">
        <div class="res-val" id="res_size">0</div>
        <p class="res-label">Position Size</p>
        <div class="action-btns">
            <div class="icon-btn" onclick="copySize()"><i class="fa-regular fa-copy"></i></div>
            <div class="icon-btn" onclick="resetForm()"><i class="fa-solid fa-rotate-right"></i></div>
        </div>
    </div>

    <div class="swap-row">
        <div class="group" style="flex:1"><label id="lbl_left">Trade Amount</label><input type="text" id="in_left" readonly></div>
        <div class="swap-char" onclick="swapFields()"><i class="fa-solid fa-right-left"></i></div>
        <div class="group" style="flex:1"><label id="lbl_right">Leverage</label><input type="number" id="in_right" value="45" oninput="calculate()"></div>
    </div>

    <div class="stats-box">
        <div class="tgt-part"><input type="number" class="tgt-input" id="v_target" value="106200" oninput="calculate()"></div>
        <div class="det-part">
            <div class="det-row">Profit: <span class="val-green" id="v_profit">0</span></div>
            <div class="det-row">Risk: <span class="val-red" id="v_risk_amt">0</span></div>
            <div class="det-row">R:R: <span class="val-orange" id="v_rr">0</span></div>
        </div>
    </div>

    <div class="nav">
        <div class="nav-item nav-active">Crypto</div>
        <div class="nav-item">FX</div>
        <div class="nav-item"><i class="fa-solid fa-gear"></i></div>
    </div>
</div>

<script>
    function calculate() {
        const cap = parseFloat(document.getElementById('v_cap').value) || 0;
        const rp = parseFloat(document.getElementById('v_riskP').value) || 0;
        const ent = parseFloat(document.getElementById('v_entry').value) || 0;
        const sl = parseFloat(document.getElementById('v_sl').value) || 0;
        const tgt = parseFloat(document.getElementById('v_target').value) || 0;

        let levInput = document.getElementById('lbl_right').innerText === "Leverage" ? 
                       document.getElementById('in_right') : document.getElementById('in_left');
        let traInput = document.getElementById('lbl_left').innerText === "Trade Amount" ? 
                       document.getElementById('in_left') : document.getElementById('in_right');
        
        const lev = parseFloat(levInput.value) || 1;
        const riskAmt = (cap * rp) / 100;
        document.getElementById('v_risk_top').innerText = "$" + Math.round(riskAmt);
        document.getElementById('v_risk_amt').innerText = Math.round(riskAmt);

        const diff = Math.abs(ent - sl);
        if (diff > 0) {
            const ps = (riskAmt / diff) * ent;
            document.getElementById('res_size').innerText = Math.round(ps).toLocaleString();
            traInput.value = (ps / lev).toFixed(1);

            if (tgt > 0) {
                const rd = Math.abs(tgt - ent);
                const pf = (ps / ent) * rd;
                document.getElementById('v_profit').innerText = "≈" + Math.round(pf).toLocaleString();
                document.getElementById('v_rr').innerText = "1:" + (rd / diff).toFixed(2);
            }
        }
    }

    function swapFields() {
        const l1 = document.getElementById('lbl_left'), l2 = document.getElementById('lbl_right');
        const i1 = document.getElementById('in_left'), i2 = document.getElementById('in_right');
        const tempL = l1.innerText; l1.innerText = l2.innerText; l2.innerText = tempL;
        const tempV = i1.value; i1.value = i2.value; i2.value = tempV;
        i1.readOnly = (l1.innerText === "Trade Amount");
        i2.readOnly = (l2.innerText === "Trade Amount");
        calculate();
    }

    function copySize() {
        const val = document.getElementById('res_size').innerText.replace(/,/g, '');
        const ta = document.createElement("textarea");
        ta.value = val; document.body.appendChild(ta);
        ta.select(); document.execCommand("copy");
        document.body.removeChild(ta);
        alert("Copied!");
    }

    // Reset Function (ဘာဂဏန်းမှ မထားဘဲ အကုန်ဖျက်မည်)
    function resetForm() {
        document.getElementById('v_cap').value = "";
        document.getElementById('v_riskP').value = "";
        document.getElementById('v_entry').value = "";
        document.getElementById('v_sl').value = "";
        document.getElementById('v_target').value = "";
        document.getElementById('in_left').value = "";
        document.getElementById('in_right').value = "";

        document.getElementById('res_size').innerText = "0";
        document.getElementById('v_risk_top').innerText = "$0";
        document.getElementById('v_profit').innerText = "0";
        document.getElementById('v_risk_amt').innerText = "0";
        document.getElementById('v_rr').innerText = "0";
    }

    window.onload = calculate;
</script>

</body>
</html>
