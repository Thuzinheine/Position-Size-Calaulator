<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Crypto Calculator</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        * { box-sizing: border-box; -webkit-tap-highlight-color: transparent; margin: 0; padding: 0; }
        body { font-family: -apple-system, sans-serif; background-color: #f5f6f8; color: #333; display: flex; justify-content: center; padding: 20px; }
        .card { width: 100%; max-width: 380px; background: white; padding: 20px; border-radius: 25px; box-shadow: 0 10px 30px rgba(0,0,0,0.05); }
        .logo-area { text-align: center; margin-bottom: 10px; }
        .logo-box { width: 80px; height: 80px; background: #1e293b; border-radius: 20px; display: inline-flex; align-items: center; justify-content: center; }
        .logo-box i { font-size: 45px; color: #ff9800; }
        .app-title { color: #2e7d32; text-align: center; font-size: 0.9rem; font-weight: 600; margin-bottom: 25px; }
        .grid { display: grid; grid-template-columns: 1fr 1fr; gap: 15px; margin-bottom: 15px; }
        .input-group { display: flex; flex-direction: column; position: relative; }
        label { font-size: 0.85rem; color: #666; margin-bottom: 8px; font-weight: 500; }
        input { background: #fff; border: 1.5px solid #ff9800; border-radius: 10px; color: #333; padding: 12px; font-size: 1.1rem; width: 100%; outline: none; }
        .risk-top-label { position: absolute; right: 0; top: 0; font-size: 0.8rem; color: #666; }
        .result-section { text-align: center; margin: 20px 0; position: relative; }
        .pos-size-val { font-size: 3.5rem; font-weight: 700; color: #374151; line-height: 1; }
        .pos-size-label { color: #2e7d32; font-size: 0.9rem; font-weight: 600; margin-top: 5px; }
        .action-btns { display: flex; justify-content: center; gap: 20px; margin-top: 15px; position: absolute; right: 10px; top: 5px; }
        .btn-icon { width: 38px; height: 38px; background: #f0fdf4; border-radius: 10px; display: flex; align-items: center; justify-content: center; color: #2e7d32; font-size: 1.2rem; cursor: pointer; border: 1px solid #dcfce7; box-shadow: 0 2px 5px rgba(0,0,0,0.05); }
        .btn-icon:active { transform: scale(0.9); background: #dcfce7; }
        .swap-row { display: flex; align-items: flex-end; gap: 10px; margin-top: 5px; }
        .swap-btn { color: #2e7d32; font-size: 1.3rem; padding-bottom: 12px; cursor: pointer; }
        .stats-card { background: #5a5f73; border-radius: 15px; margin-top: 25px; display: grid; grid-template-columns: 1fr 1.2fr; overflow: hidden; color: white; }
        .target-price-area { padding: 20px; display: flex; align-items: center; border-right: 1px solid rgba(255,255,255,0.2); }
        .target-input { background: #6b7280; border: 1px solid rgba(255,255,255,0.4); border-radius: 10px; color: white; width: 100%; padding: 10px; text-align: center; font-size: 1rem; }
        .details-area { padding: 15px; font-size: 0.95rem; }
        .detail-row { display: flex; justify-content: space-between; margin-bottom: 8px; border-bottom: 1px solid rgba(255,255,255,0.1); padding-bottom: 5px; }
        .val-green { color: #4ade80; font-weight: bold; }
        .val-red { color: #f87171; font-weight: bold; }
        .val-orange { color: #fbbf24; font-weight: bold; }
        .bottom-nav { background: #ff6d00; border-radius: 50px; margin-top: 30px; display: flex; justify-content: space-around; padding: 12px; align-items: center; }
        .nav-link { color: white; font-weight: 700; font-size: 0.9rem; display: flex; align-items: center; gap: 8px; }
        .nav-link.active { background: #064e3b; padding: 8px 18px; border-radius: 20px; }
    </style>
</head>
<body>

<div class="card">
    <div class="logo-area"><div class="logo-box"><i class="fa-solid fa-calculator-combined"></i></div></div>
    <p class="app-title">Crypto Position Size Calculator</p>

    <div class="grid">
        <div class="input-group"><label>Capital</label><input type="number" id="cap" value="130" oninput="run()"></div>
        <div class="input-group">
            <label>Risk %</label><span class="risk-top-label" id="riskValue">$130</span>
            <input type="number" id="riskP" value="100" oninput="run()">
        </div>
        <div class="input-group"><label>Entry Price</label><input type="number" id="ent" value="95283" oninput="run()"></div>
        <div class="input-group"><label>Stop Loss</label><input type="number" id="sl" value="94400" oninput="run()"></div>
    </div>

    <div class="result-section">
        <div class="pos-size-val" id="resSize">14028</div>
        <p class="pos-size-label">Position Size</p>
        <div class="action-btns">
            <div class="btn-icon" onclick="copyResult()"><i class="fa-regular fa-copy"></i></div>
            <div class="btn-icon" onclick="resetApp()"><i class="fa-solid fa-rotate-right"></i></div>
        </div>
    </div>

    <div class="swap-row">
        <div class="input-group"><label id="lblLeft">Trade Amount</label><input type="text" id="inLeft" readonly></div>
        <div class="swap-btn" onclick="swap()"><i class="fa-solid fa-right-left"></i></div>
        <div class="input-group"><label id="lblRight">Leverage</label><input type="number" id="inRight" value="45" oninput="run()"></div>
    </div>

    <div class="stats-card">
        <div class="target-price-area">
            <input type="number" class="target-input" id="tgt" value="106200" oninput="run()">
        </div>
        <div class="details-area">
            <div class="detail-row"><span>Profit:</span><span class="val-green" id="vProfit">≈1607</span></div>
            <div class="detail-row"><span>Risk:</span><span class="val-red" id="vRisk">130</span></div>
            <div class="detail-row"><span>R:R</span><span class="val-orange" id="vRR">1:12.36</span></div>
        </div>
    </div>

    <div class="bottom-nav">
        <div class="nav-link active"><i class="fa-solid fa-bitcoin-sign"></i> Crypto</div>
        <div class="nav-link">FX</div>
        <div class="nav-link"><i class="fa-solid fa-gear"></i></div>
    </div>
</div>

<script>
    function run() {
        const c = parseFloat(document.getElementById('cap').value) || 0;
        const rp = parseFloat(document.getElementById('riskP').value) || 0;
        const e = parseFloat(document.getElementById('ent').value) || 0;
        const s = parseFloat(document.getElementById('sl').value) || 0;
        const t = parseFloat(document.getElementById('tgt').value) || 0;

        let levIn = document.getElementById('lblRight').innerText === "Leverage" ? document.getElementById('inRight') : document.getElementById('inLeft');
        let traIn = document.getElementById('lblLeft').innerText === "Trade Amount" ? document.getElementById('inLeft') : document.getElementById('inRight');
        const lv = parseFloat(levIn.value) || 1;

        const ra = (c * rp) / 100;
        document.getElementById('riskValue').innerText = "$" + Math.round(ra);
        document.getElementById('vRisk').innerText = Math.round(ra);

        const d = Math.abs(e - s);
        if (d > 0) {
            const ps = (ra / d) * e;
            document.getElementById('resSize').innerText = Math.round(ps).toLocaleString();
            traIn.value = (ps / lv).toFixed(1);

            if (t > 0) {
                const rd = Math.abs(t - e);
                const pf = (ps / e) * rd;
                document.getElementById('vProfit').innerText = "≈" + Math.round(pf).toLocaleString();
                document.getElementById('vRR').innerText = "1:" + (rd / d).toFixed(2);
            }
        }
    }

    function swap() {
        const l1 = document.getElementById('lblLeft'), l2 = document.getElementById('lblRight');
        const i1 = document.getElementById('inLeft'), i2 = document.getElementById('inRight');
        const tL = l1.innerText; l1.innerText = l2.innerText; l2.innerText = tL;
        const tV = i1.value; i1.value = i2.value; i2.value = tV;
        i1.readOnly = (l1.innerText === "Trade Amount");
        i2.readOnly = (l2.innerText === "Trade Amount");
        run();
    }

    function copyResult() {
        const val = document.getElementById('resSize').innerText.replace(/,/g, '');
        const tempInput = document.createElement("input");
        tempInput.value = val;
        document.body.appendChild(tempInput);
        tempInput.select();
        document.execCommand("copy");
        document.body.removeChild(tempInput);
        alert("Position Size Copied!");
    }

    // Refresh အစား Reset Function ကို ပြောင်းသုံးခြင်း
    function resetApp() {
        document.getElementById('cap').value = 130;
        document.getElementById('riskP').value = 100;
        document.getElementById('ent').value = 95283;
        document.getElementById('sl').value = 94400;
        document.getElementById('tgt').value = 106200;
        
        // Leverage ကို Leverage ရှိနေတဲ့ အကွက်မှာ ပြန်ဖြည့်ပေးခြင်း
        if (document.getElementById('lblRight').innerText === "Leverage") {
            document.getElementById('inRight').value = 45;
        } else {
            document.getElementById('inLeft').value = 45;
        }
        run();
    }

    run();
</script>
</body>
</html>
